---
id: bplyh
name: runtime.entities.feature
file_version: 1.0.2
app_version: 0.9.7-2
file_blobs:
  examples/react/src/feature/someplugin.feature.ts: 18c10d2ec11aa63022d97b8bdb34080aeb93521b
---

A feature is combined of several files: ^feature\_pitch

*   `<feature-name>.feature.ts` - feature definition file.
    
*   `<feature-name>.<some-env>.env.ts` - some-env specific setup code. ^feature\_env\_file\_example
    
*   `<feature-name>.<another-env>.env.ts` - another-env specific setup code

<br/>

### Feature definition file

Feature definition is created in a `<feature-name>.feature.ts` file, and is exposed as the `default`[<sup id="18TRvf">â†“</sup>](#f-18TRvf) export.

For example:
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ examples/react/src/feature/someplugin.feature.ts
```typescript
â¬œ 1      import { Feature } from '@wixc3/engine-core';
â¬œ 2      import guiFeature from './gui.feature';
â¬œ 3      
ðŸŸ© 4      export default new Feature({
ðŸŸ© 5          id: 'plugin',
ðŸŸ© 6          api: {},
ðŸŸ© 7          dependencies: [guiFeature.asDependency],
ðŸŸ© 8      });
â¬œ 9      
```

<br/>

^feature\_constructor

`Feature` constructor accepts 3 options

### `id`[<sup id="Z1BX5ok">â†“</sup>](#f-Z1BX5ok)`: string`

Unique identifier, This is the feature name. For example a `file-server` feature will be initiated as `const fileServerFeature = new Feature({id: 'file-server', ...rest})` and the rest of the folder structure should be prefixed with `file-server`.




<br/>

<div align="center"><img src="assets/images/feature_folder_example.png" style="width:'50%'"/></div>

<br/>

### `Dependencies: []`

Features that this current feature is dependant upon

### `api: Api`

Api implements 3 types of interfaces:

#### Config

#### Slot

!\[\[runtime.entities.slot#^slots-pitch\]\]

#### Service

Service is a method within an API. When we need to declare API methods we will call the `Service.withType` static.

```
const myFeature = new Feature({
  id: 'myFeature',
  api: {
    echoService: Service.withType< echo(): string>().defineEntity(env1)
  },
  // etc..
})
```

## `Feature` instance

### setup(env, handler)

This is the method of a feature to set itself up in an \[\[runtime.entities.environment\]\]

#### arguments

<br/>

|argument|description                                                                            |
|--------|---------------------------------------------------------------------------------------|
|env     |\[\[runtime.entities.environment\]\] - the environemnt we want to set the feature up in|
|handler |\[\[Set up handler|runtime.entities.feature#^setup\_handler\]\]                        |

<br/>

#### Setup handler

^setup\_handler

The setup handler is a method being called with 3 arguments.

```
myFeature.setup(myEnv, (settingUpFeature, dependencies, contexts) => { ... });
```

*   **_settingUpFeature_** - all the entities related to the feature:

<br/>

|argument |description                                                                           |
|---------|--------------------------------------------------------------------------------------|
|id       |(_string_) - id                                                                       |
|run      |(method) - \[\[run method|runtime.entities.feature#^run\_method\]\]                   |
|onDispose|(method) - a method will be called once this feature gets disposed in this environment|
|Own slots|all the slots defined in the feature api for this environment                         |
|Configs  |all the configurations defined in the feature api and accessible in this environment  |

<br/>

#### `run(cb: Function)`

^run\_method

This will be called when the environment is ready. For example, when we want to render a react component we need the document to be ready. In this case we will insert all react rendering logic inside the `run` method.

*   **_dependencies_** - a list of all the dependencies the feature declared dependency on, and all the api's available from that feature in the current environment
    
*   **_contexts_** - api's provided to the specific environment in case the environment is a \[\[contextual environment|runtime.entities.environment.targets\]\]
    

### setupContext(env, contextName,handler)

In case the environment is a \[\[contextual environment|runtime.entities.environment.targets\]\], this is how we can provide a specific context to the environment.

```
myFeature.setupContext(myEnv, 'envContext', (deps) => {
  return {
    method: () => 'from context',
  };
});
```

##### For an example of a minimal contextual environment look at `/examples/multi-env`

<br/>

<!-- THIS IS AN AUTOGENERATED SECTION. DO NOT EDIT THIS SECTION DIRECTLY -->
### Swimm Note

<span id="f-18TRvf">default</span>[^](#18TRvf) - "examples/react/src/feature/someplugin.feature.ts" L4
```typescript
export default new Feature({
```

<span id="f-Z1BX5ok">id</span>[^](#Z1BX5ok) - "examples/react/src/feature/someplugin.feature.ts" L5
```typescript
    id: 'plugin',
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBZW5naW5lJTNBJTNBd2l4cGxvc2l2ZXM=/docs/bplyh).